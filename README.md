# Search Engine
The matching search engine to my [web crawler](https://github.com/SchBenedikt/web-crawler).

## Features
- **Modern 3D Interactive Landing Page** with full-screen visualizations that dynamically adapt to different screen sizes
- **AI-Powered Answers** providing instant responses with verified sources
- **Knowledge Panels** displaying relevant information from Wikipedia and trusted sources
- **Smart Search** with real-time search speed display
- **Website Summaries** generated by AI to save reading time
- **Google Integration** for comprehensive search results
- **Dark Mode Support** for comfortable viewing in all lighting conditions
- **Responsive Design** optimized for all devices
- **MongoDB Backend** for efficient data operations

## Detailed Feature Overview

### Modern 3D Landing Page
The search engine features a stunning 3D visualization on the landing page created with Three.js. The visualization creates an immersive experience with:
- Dynamic node connections that respond to mouse movements
- Responsive design that works across devices

### AI-Powered Features
The search engine leverages AI for multiple features:
- **Smart Answers**: Get direct answers to questions without needing to visit multiple websites
- **Content Summaries**: AI-generated summaries of web pages to quickly understand their content
- **Query Understanding**: Intelligent parsing of search queries to deliver more relevant results

### Knowledge Panels
Knowledge panels provide quick access to key information about searched topics:
- Information from Wikipedia and other trusted sources
- Quick facts, images, and related links
- Context-aware information based on search query

### Search Interface
The search interface is designed for maximum usability:
- Clean, distraction-free design
- Real-time search suggestions
- Search speed display
- Filter options for refined results

### Technical Specifications
- Built with Flask and modern frontend technologies
- MongoDB for efficient data storage and retrieval
- Responsive Bootstrap-based UI with custom enhancements
- Three.js for 3D visualizations
- Dark mode implementation with CSS variables and prefers-color-scheme media queries

## Docker Instructions

### Building the Docker Image

To build the Docker image, run the following command in the root directory of the repository:

```sh
docker build -t ghcr.io/schbenedikt/search-engine:latest .
```

### Running the Docker Container

To run the Docker container, use the following command:

```sh
docker run -p 5560:5560 ghcr.io/schbenedikt/search-engine:latest
```

This will start the Flask application using Gunicorn as the WSGI server, and it will be accessible at `http://localhost:5560`.

### Pulling the Docker Image

The Docker image is publicly accessible. To pull the Docker image from GitHub Container Registry, use the following command:

```sh
docker pull ghcr.io/schbenedikt/search-engine:latest
```

### Note
Ensure that the `tags` field in the GitHub Actions workflow is correctly set to `ghcr.io/schbenedikt/search-engine:latest` to avoid multiple packages.

### Running with Docker Compose

To run both the search engine and MongoDB containers using Docker Compose, use the following command:

```sh
docker-compose up
```

This will start both containers and the Flask application will be accessible at `http://localhost:5560`.

### Docker Compose File

The `docker-compose.yml` file is used to manage both the search engine and MongoDB containers. Here is an example of the `docker-compose.yml` file:

```yaml
version: '3.8'

services:
  search-engine:
    image: ghcr.io/schbenedikt/search-engine:latest
    depends_on:
      - mongodb
    ports:
      - "5560:5560"

  mongodb:
    image: mongo:latest
    ports:
      - "27017:27017"
    volumes:
      - mongo-data:/data/db

volumes:
  mongo-data:
```

### Database Configuration

The `db_config.json` file is used to store the database configuration. Here is an example of the `db_config.json` file:

```json
[
  {
    "url": "mongodb://localhost:27017",
    "name": "search_engine",
    "username": "your_username",
    "password": "your_password"
  }
]
```

### Settings Page

The `settings.html` file has been updated to include fields for username and password. You can access the settings page at `http://localhost:5560/settings` to update the database configuration.

## Making MongoDB Accessible from the Internet

### Using fritz.box for Port Forwarding

1. Log in to your fritz.box router by entering `http://fritz.box` in your web browser.
2. Navigate to the "Internet" section and then to "Permit Access".
3. Click on "Add Device for Sharing".
4. Select the device running MongoDB from the list.
5. Set the application to "Other Application" and enter the following details:
   - Protocol: TCP
   - From port: 27017
   - To port: 27017
6. Click "OK" to save the settings.

### Using Cloudflare Tunnel

1. Sign up for a Cloudflare account if you don't have one.
2. Go to the "Zero Trust" dashboard in Cloudflare.
3. Navigate to "Access" and then to "Tunnels".
4. Click on "Create a Tunnel".
5. Follow the instructions to install the Cloudflare Tunnel client on your server.
6. Create a new tunnel and configure it to forward traffic to your MongoDB instance on port 27017.
7. Update your MongoDB connection URL to use the Cloudflare Tunnel endpoint.

## Installation and Setup

### Requirements
- Python 3.10+
- MongoDB (local installation or remote access)
- Modern web browser with JavaScript enabled

### Installation Steps

1. Clone the repository
   ```sh
   git clone https://github.com/SchBenedikt/search-engine.git
   cd search-engine
   ```

2. Create and activate a virtual environment (optional but recommended)
   ```sh
   python -m venv venv
   # On Windows
   venv\Scripts\activate
   # On macOS/Linux
   source venv/bin/activate
   ```

3. Install dependencies
   ```sh
   pip install -r requirements.txt
   ```

4. Configure your database
   - Update the `db_config.json` with your MongoDB credentials
   - Ensure MongoDB is running and accessible

5. Start the application
   ```sh
   python app.py
   ```

6. Open your browser and navigate to `http://localhost:5560`

## Usage Guide

### Basic Search
1. Enter your query in the search box on the homepage
2. Press Enter or click the search button
3. View the search results, including AI-powered answers and knowledge panels

### Advanced Features
- **AI Assistance**: Prefix your query with "Ask AI:" to get more detailed AI-generated answers
- **Filter Results**: Use the filter options on the search results page to refine your search
- **Dark Mode**: Toggle dark mode in the settings or let it automatically adjust based on your system preferences
- **Settings Customization**: Visit the settings page to customize your search experience

## Troubleshooting

### Common Issues and Solutions

#### Connection to MongoDB Failed
- Verify MongoDB is running: `mongod --version`
- Check your MongoDB connection string in `db_config.json`
- Ensure network connectivity if using a remote MongoDB instance
- Verify firewall settings allow connections on port 27017

#### 3D Visualization Not Working
- Ensure your browser supports WebGL (check at [WebGL Report](https://webglreport.com))
- Update your graphics drivers
- Try disabling hardware acceleration in your browser settings

#### Search Results Not Loading
- Check your internet connection
- Verify API keys for external services (if applicable)
- Clear browser cache and cookies

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add some amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments
- Three.js for 3D visualization capabilities
- MongoDB for database support
- Flask for the web framework
- Bootstrap for responsive UI components
