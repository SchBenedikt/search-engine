<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Search – Modern and fast search engine with AI support.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vRkX/v+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Chart.js für Krypto-Diagramme -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    
    <!-- Instrument Serif font for headers -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Instrument Sans as body font for nice contrast -->
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/weather-panel.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile-tabs.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stackoverflow-panel.css') }}">

</head>
<body class="body-font">
    {% include 'includes/header.html' %}
    

<!-- Modal for the full AI response -->
<div class="modal fade" id="full-response-modal" tabindex="-1" aria-labelledby="fullResponseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="fullResponseModalLabel">Full AI Response</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="full-response-modal-body">
                <!-- The full response will be inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for chatting with AI about a website's content -->
<div class="modal fade" id="website-chat-modal" tabindex="-1" aria-labelledby="websiteChatModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="websiteChatModalLabel">Chat about Website Content</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="website-chat-loading" class="text-center p-4">
                    <div class="spinner-border text-primary me-2" role="status"></div>
                    <span>Loading website content...</span>
                </div>
                <div id="website-chat-content" style="display: none;">
                    <div class="row">
                        <!-- Left column: Detected content -->
                        <div class="col-md-5">
                            <div class="content-preview-panel">
                                <h6 class="mb-2">Detected Content:</h6>
                                <div id="website-content-preview" class="content-preview-box">
                                    <div class="content-preview-placeholder">
                                        <p class="text-muted">Analyzing website content...</p>
                                    </div>
                                </div>
                                <small class="text-muted mt-1">This is an excerpt of the detected content from the website.</small>
                            </div>
                        </div>
                        <!-- Right column: Chat area -->
                        <div class="col-md-7">
                            <div id="website-chat-messages" class="mb-3" style="max-height: 400px; overflow-y: auto;">
                                <div class="ai-message">
                                    <p>I've analyzed the content of this website. What would you like to know about it?</p>
                                </div>
                            </div>
                            <div class="input-group">
                                <input type="text" id="website-chat-input" class="form-control" placeholder="Ask your question..." aria-label="Your question">
                                <button class="btn btn-primary" type="button" id="website-chat-send">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="website-chat-error" class="alert alert-danger mt-3" style="display: none;">
                    The website content could not be loaded. Please try again later.
                </div>
            </div>
        </div>
    </div>
</div>



      
  
    <div class="empty-placeholder" style="height: 80px;"></div> <!-- Platzhalter für die feste Navbar -->

    <div class="container">
        <form class="d-flex w-100" method="POST" action="/search">
            <input id="search-input" class="form-control me-2 flex-grow-1 transparent-search" type="search" placeholder="Search" aria-label="Search" name="query" value="{{ request.args.get('query', '') }}">
            <!-- Updated select element with reduced width -->
            <select class="form-select me-2" name="type" id="type-select" style="max-width: 150px;">
                <option value="">Alle</option>
                {% for cat in categories %}
                    <option value="{{ cat }}" {% if cat == request.args.get('type', '') %} selected {% endif %}>
                        {{ cat }}
                    </option>
                {% endfor %}
            </select>
            <!-- Language filter -->
            <select class="form-select me-2" name="lang" id="lang-select" style="max-width: 150px;">
                <option value="">All</option>
                <option value="en-US" {% if request.args.get('lang', '') == 'en-US' %} selected {% endif %}>English</option>
                <option value="de-DE" {% if request.args.get('lang', '') == 'de-DE' %} selected {% endif %}>German</option>
                <!-- Add more options as needed -->
            </select>
            <button class="btn btn-outline-dark" type="submit">Search</button>
        </form>
    
        {% if message %}
        <div class="alert alert-warning">
            {{ message }}
        </div>
        {% endif %}
        <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 5">
            <div id="search-time-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#007bff" class="bi bi-search me-2" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                    </svg>
                    <strong class="me-auto">Search Duration</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    Query executed in {{ query_time | round(3) }} seconds.
                </div>
            </div>
            <div id="success-like-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-heart-fill me-2" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                    </svg>
                    <strong class="me-auto">Success</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    Link successfully liked!
                </div>
            </div>
            <div id="like-error" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-exclamation-triangle-fill me-2" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                    </svg>
                    <strong class="me-auto">Error</strong>
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    You can only like once per minute.
                </div>
            </div>
            
            <!-- Add more toasts here as needed -->
        </div>
        
        <div class="result-container">
            {% if query %}
                <br>
                <!-- Prominentes Wetter-Panel ganz oben (nur anzeigen, wenn es eine Wetterabfrage ist) -->
                <!-- Prominentes Wetter-Panel oder Crypto-Panel ganz oben -->
                {% if weather_panel %}
                <div class="weather-highlight-container mb-4">
                    <div class="knowledge-panel weather-highlight-panel">
                        <div class="weather-header d-flex align-items-center">
                            {% if weather_panel.current.weather_icon %}
                            <img src="{{ weather_panel.current.weather_icon }}" alt="{{ weather_panel.current.weather_desc }}" class="weather-main-icon me-3">
                            {% endif %}
                            <div>
                                <h2 class="mb-0">{{ weather_panel.location.full_name }}</h2>
                                <div class="weather-desc">{{ weather_panel.current.weather_desc }}</div>
                            </div>
                            <div class="ms-auto current-temp">
                                <span class="temp-value">{{ weather_panel.current.temp_c }}°C</span>
                                <span class="temp-unit">({{ weather_panel.current.temp_f }}°F)</span>
                            </div>
                        </div>
                        
                        <div class="weather-details-row mt-3">
                            <div class="row">
                                <div class="col-md-4 weather-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#0d6efd" class="bi bi-thermometer-half me-2" viewBox="0 0 16 16">
                                            <path d="M9.5 12.5a1.5 1.5 0 1 1-2-1.415V6.5a.5.5 0 0 1 1 0v4.585a1.5 1.5 0 0 1 1 1.415"/>
                                            <path d="M5.5 2.5a2.5 2.5 0 0 1 5 0v7.55a3.5 3.5 0 1 1-5 0zM8 1a1.5 1.5 0 0 0-1.5 1.5v7.987l-.167.15a2.5 2.5 0 1 0 3.333 0l-.166-.15V2.5A1.5 1.5 0 0 0 8 1"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">Gefühlt</div>
                                            <div class="detail-value">{{ weather_panel.current.feels_like_c }}°C</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 weather-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5bc0de" class="bi bi-droplet-half me-2" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M7.21.8C7.69.295 8 0 8 0c.109.363.234.708.371 1.038.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8zm.413 1.021A31.25 31.25 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"/>
                                            <path fill-rule="evenodd" d="M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">Luftfeuchtigkeit</div>
                                            <div class="detail-value">{{ weather_panel.current.humidity }}%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 weather-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#6c757d" class="bi bi-wind me-2" viewBox="0 0 16 16">
                                            <path d="M12.5 2A2.5 2.5 0 0 0 10 4.5a.5.5 0 0 1-1 0A3.5 3.5 0 1 1 12.5 8H.5a.5.5 0 0 1 0-1h12a2.5 2.5 0 0 0 0-5zm-7 1a1 1 0 0 0-1 1 .5.5 0 0 1-1 0 2 2 0 1 1 2 2h-5a.5.5 0 0 1 0-1h5a1 1 0 0 0 0-2zM0 9.5A.5.5 0 0 1 .5 9h10.042a3 3 0 1 1-3 3 .5.5 0 0 1 1 0 2 2 0 1 0 2-2H.5a.5.5 0 0 1-.5-.5z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">Wind</div>
                                            <div class="detail-value">{{ weather_panel.current.wind_speed }} km/h ({{ weather_panel.current.wind_dir }})</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {% if weather_panel.forecast %}
                        <div class="forecast-container mt-4">
                            <div class="row">
                                {% for day in weather_panel.forecast %}
                                <div class="col-md-4 forecast-day">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <h5 class="card-title">{{ day.date }}</h5>
                                            {% if day.weather_icon %}
                                            <img src="{{ day.weather_icon }}" alt="{{ day.weather_desc }}" class="forecast-icon my-2">
                                            {% endif %}
                                            <p class="weather-desc mb-2">{{ day.weather_desc }}</p>
                                            <div class="temperatures">
                                                <span class="high-temp">{{ day.max_temp_c }}°C</span>
                                                <span class="temp-separator">/</span>
                                                <span class="low-temp">{{ day.min_temp_c }}°C</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                        
                        <div class="text-end mt-3">
                            <small class="text-muted">Letzte Aktualisierung: {{ weather_panel.updated }} | Quelle: wttr.in</small>
                        </div>
                    </div>
                </div>
                {% elif crypto_panel %}
                <!-- Prominentes Crypto-Panel -->
                <div class="crypto-highlight-container mb-4">
                    <div class="knowledge-panel crypto-highlight-panel">
                        <div class="crypto-header d-flex align-items-center">
                            {% if crypto_panel.icon_url %}
                            <img src="{{ crypto_panel.icon_url }}" alt="{{ crypto_panel.name }}" class="crypto-icon me-3" style="width:48px;height:48px;">
                            {% endif %}
                            <div>
                                <h2 class="mb-0">{{ crypto_panel.name }}</h2>
                                <span class="badge bg-warning text-dark">{{ crypto_panel.symbol }}</span>
                            </div>
                            <div class="ms-auto crypto-price">
                                <div class="price-value">{{ crypto_panel.currency_symbol }}{{ crypto_panel.price|round(2) }}</div>
                                {% if crypto_panel.price_change_24h is defined %}
                                <div class="crypto-change {% if crypto_panel.price_change_24h > 0 %}positive{% else %}negative{% endif %}">
                                    {% if crypto_panel.price_change_24h > 0 %}+{% endif %}{{ crypto_panel.price_change_24h|round(2) }}% (24h)
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        {% if crypto_panel.chart_data %}
                        <div class="crypto-chart-container mt-3" style="height: 200px;">
                            <canvas id="cryptoChart"></canvas>
                        </div>
                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const ctx = document.getElementById('cryptoChart').getContext('2d');
                                const chartData = {{ crypto_panel.chart_data|tojson }};
                                
                                new Chart(ctx, {
                                    type: 'line',
                                    data: {
                                        labels: chartData.labels,
                                        datasets: [{
                                            label: '{{ crypto_panel.symbol }} Price',
                                            data: chartData.prices,
                                            borderColor: '{{ crypto_panel.color|default("#F7931A") }}',
                                            borderWidth: 2,
                                            fill: false,
                                            pointRadius: 0,
                                            tension: 0.1
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false,
                                        plugins: {
                                            legend: {
                                                display: false
                                            },
                                            tooltip: {
                                                mode: 'index',
                                                intersect: false,
                                                callbacks: {
                                                    label: function(context) {
                                                        return '{{ crypto_panel.currency_symbol }}' + context.parsed.y.toFixed(2);
                                                    }
                                                }
                                            }
                                        },
                                        scales: {
                                            x: {
                                                display: true,
                                                grid: {
                                                    display: false
                                                }
                                            },
                                            y: {
                                                display: true,
                                                grid: {
                                                    display: true,
                                                    drawBorder: false,
                                                }
                                            }
                                        }
                                    }
                                });
                            });
                        </script>
                        {% endif %}
                        
                        <div class="crypto-details-row mt-3">
                            <div class="row">
                                <div class="col-md-3 crypto-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#0d6efd" class="bi bi-cash-coin me-2" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"/>
                                            <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"/>
                                            <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"/>
                                            <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">Market Cap</div>
                                            <div class="detail-value">{{ crypto_panel.currency_symbol }}{{ (crypto_panel.market_cap / 1000000000)|round(2) }}B</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 crypto-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#5bc0de" class="bi bi-graph-up me-2" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">24h Volume</div>
                                            <div class="detail-value">{{ crypto_panel.currency_symbol }}{{ (crypto_panel.volume_24h / 1000000000)|round(2) }}B</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 crypto-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#6c757d" class="bi bi-currency-exchange me-2" viewBox="0 0 16 16">
                                            <path d="M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">Circulating Supply</div>
                                            <div class="detail-value">{{ (crypto_panel.circulating_supply / 1000000)|round(1) }}M</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 crypto-detail-item">
                                    <div class="d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#28a745" class="bi bi-trophy me-2" viewBox="0 0 16 16">
                                            <path d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935zM3.504 1c.007.517.026 1.006.056 1.469.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.501.501 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667.03-.463.049-.952.056-1.469H3.504z"/>
                                        </svg>
                                        <div>
                                            <div class="detail-label">All-Time High</div>
                                            <div class="detail-value">{{ crypto_panel.currency_symbol }}{{ crypto_panel.ath|round(2) }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="crypto-description mt-3">
                            <p>{{ crypto_panel.description|truncate(300) }}</p>
                        </div>
                        
                        <div class="crypto-links mt-3">
                            {% if crypto_panel.website %}
                            <a href="{{ crypto_panel.website }}" target="_blank" class="btn btn-outline-primary me-2">Official Website</a>
                            {% endif %}
                            {% if crypto_panel.explorer %}
                            <a href="{{ crypto_panel.explorer }}" target="_blank" class="btn btn-outline-secondary me-2">Explorer</a>
                            {% endif %}
                            <a href="https://coinmarketcap.com/currencies/{{ crypto_panel.name|lower }}" target="_blank" class="btn btn-outline-info">View on CoinMarketCap</a>
                        </div>
                        
                        <div class="text-end mt-3">
                            <small class="text-muted">Quelle: {{ crypto_panel.source|default('CoinGecko') }}</small>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- Add placeholder for AI response that will be filled asynchronously -->
                <div id="ai-response-container"></div>
                

                <!-- New search content wrapper with knowledge panel -->
                <div class="search-content-wrapper mobile-view-results">
                    <!-- Search results column -->
                    <div class="search-results-column">
                        <ul class="list-group">
                            {% if results %}
                                {% for result in results %}
                                    <li class="list-group-item result-item" data-url="{{ result.url }}">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="flex-grow-1 ms-3">
                                                {% if result.title %}
                                                    <a href="{{ result.url }}" target="_blank">
                                                        <!-- Favicon with lazy loading -->
                                                        <img class="fav-icon" data-url="{{ result.url }}" alt="Favicon" loading="lazy" style="width:16px;height:16px;margin-right:5px;display:none;">
                                                        {{ result.title }}
                                                        {% if 'source' in result and result.source == 'google' %}
                                                            <span class="badge bg-primary ms-2">Google</span>
                                                        {% endif %}
                                                    </a>
                                                    <!-- AI Chat Icon -->
                                                    <a href="#" onclick="openWebsiteChat('{{ result.url }}'); return false;" class="ai-chat-icon" title="Chat about this content">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-text" viewBox="0 0 16 16">
                                                            <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                                                            <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"/>
                                                        </svg>
                                                    </a>
                                                {% else %}
                                                    <a href="{{ result.url }}" target="_blank"><em>No title available</em></a>
                                                {% endif %}
                                                <p class="url">{{ result.url }}</p>  <!-- result[0] is the URL -->
                                                {% if result.description %}  <!-- result.description is the description -->
                                                    <p class="mt-2">{{ result.description }}</p>
                                                {% else %}
                                                    <p class="mt-2"><em>No description available</em></p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <!-- Preview tooltip container -->
                                        <div class="preview-tooltip">
                                            <div class="preview-loading">
                                                <div class="spinner-border spinner-border-sm text-primary me-2" role="status"></div>
                                                <span>Loading preview...</span>
                                            </div>
                                            <div class="preview-content" style="display: none;"></div>
                                            <div class="preview-error" style="display: none;">Preview could not be loaded</div>
                                        </div>
                                    </li>
                                {% endfor %}
                            {% else %}
                                <div class="alert alert-info" role="alert">
                                    No results found for your search query. Please try different keywords.
                                </div>
                            {% endif %}
                        </ul>
                        
                        <!-- Pagination navigation -->
                        {% if total_results > per_page %}
                        <nav aria-label="Search results pagination" class="mt-4">
                            <ul class="pagination justify-content-center">
                                <!-- Previous page -->
                                {% if page > 1 %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('search', query=query, original_query=original_query, type=request.args.get('type', ''), lang=request.args.get('lang', ''), page=page-1) }}" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" aria-hidden="true">&laquo;</span>
                                </li>
                                {% endif %}
                                
                                <!-- Page numbers -->
                                {% set pages = ((total_results / per_page)|round(0, 'ceil'))|int %}
                                {% set max_visible_pages = 5 %}
                                {% set start_page = [1, page - (max_visible_pages//2)]|max %}
                                {% set end_page = [pages, start_page + max_visible_pages - 1]|min %}
                                {% set start_page = [1, end_page - max_visible_pages + 1]|max %}
                                
                                {% if start_page > 1 %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('search', query=query, original_query=original_query, type=request.args.get('type', ''), lang=request.args.get('lang', ''), page=1) }}">1</a>
                                </li>
                                {% if start_page > 2 %}
                                <li class="page-item disabled">
                                    <span class="page-link">...</span>
                                </li>
                                {% endif %}
                                {% endif %}
                                
                                {% for p in range(start_page, end_page + 1) %}
                                <li class="page-item {% if p == page %}active{% endif %}">
                                    <a class="page-link" href="{{ url_for('search', query=query, original_query=original_query, type=request.args.get('type', ''), lang=request.args.get('lang', ''), page=p) }}">{{ p }}</a>
                                </li>
                                {% endfor %}
                                
                                {% if end_page < pages %}
                                {% if end_page < pages - 1 %}
                                <li class="page-item disabled">
                                    <span class="page-link">...</span>
                                </li>
                                {% endif %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('search', query=query, original_query=original_query, type=request.args.get('type', ''), lang=request.args.get('lang', ''), page=pages) }}">{{ pages }}</a>
                                </li>
                                {% endif %}
                                
                                <!-- Next page -->
                                {% if page < pages %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('search', query=query, original_query=original_query, type=request.args.get('type', ''), lang=request.args.get('lang', ''), page=page+1) }}" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                                {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" aria-hidden="true">&raquo;</span>
                                </li>
                                {% endif %}
                            </ul>
                        </nav>
                        {% endif %}
                        
                        <!-- Search Engine Links with Improved Design -->
                        <div class="mt-4 mb-4 search-elsewhere-container">
                            <h3 class="mb-3 heading-font">Search elsewhere:</h3>
                            <div class="search-engines-container">
                                <a href="https://www.google.com/search?q={{ query|urlencode }}" target="_blank" class="search-engine-card">
                                    <div class="search-engine-logo google">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                            <!-- Google SVG Path Data -->
                                            <path fill="#4285F4" d="M22.46,12.13c0-0.8-0.07-1.56-0.2-2.31H12v4.36h5.88c-0.26,1.4-1.03,2.6-2.23,3.42v2.81h3.62 C21.43,18.67,22.46,15.69,22.46,12.13z"></path><path fill="#34A853" d="M12,23c3.24,0,5.97-1.07,7.95-2.9l-3.62-2.81c-1.07,0.72-2.45,1.15-4.33,1.15 c-3.31,0-6.12-2.23-7.13-5.23H1.29v2.9C3.24,20.99,7.31,23,12,23z"></path><path fill="#FBBC05" d="M4.87,13.87c-0.2-0.6-0.31-1.25-0.31-1.9s0.11-1.3,0.31-1.9V7.17H1.29c-0.61,1.21-0.97,2.58-0.97,4.01 s0.36,2.8,0.97,4.01L4.87,13.87z"></path><path fill="#EA4335" d="M12,4.85c1.77,0,3.36,0.61,4.6,1.8l3.21-3.21C17.97,1.64,15.24,0,12,0C7.31,0,3.24,2.01,1.29,5.08 l3.58,2.9C5.88,7.08,8.69,4.85,12,4.85z"></path>
                                        </svg>
                                    </div>
                                    <span>Google</span>
                                </a>
                                <a href="https://www.bing.com/search?q={{ query|urlencode }}" target="_blank" class="search-engine-card">
                                    <div class="search-engine-logo bing">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                            <!-- Bing SVG Path Data -->
                                            <path fill="#008373" d="M 4.6816406 3 L 4.6816406 16.775391 L 10.199219 19.685547 L 14.964844 17.023438 L 19.681641 21 L 19.681641 3.3925781 L 15.347656 4.8652344 L 15.347656 14.398438 L 10.199219 11.835938 L 10.199219 5.1289062 L 4.6816406 3 z"></path>
                                        </svg>
                                    </div>
                                    <span>Bing</span>
                                </a>
                                <a href="https://duckduckgo.com/?q={{ query|urlencode }}" target="_blank" class="search-engine-card">
                                    <div class="search-engine-logo ddg">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                            <!-- DuckDuckGo SVG Path Data -->
                                            <path fill="#DE5833" d="M19.95,11.71c-0.2-3.33-2.64-6.06-5.78-6.55c1.17-1.06,1.87-2.58,1.87-4.25C16.04,0.4,15.5,0,14.93,0 c-0.4,0-0.78,0.21-1.05,0.6c-1.07,1.51-3.03,2.48-5.26,2.48S4.42,2.11,3.35,0.6C3.08,0.21,2.7,0,2.29,0C1.73,0,1.19,0.4,1.19,0.91 c0,1.67,0.7,3.19,1.87,4.25C0.16,5.83-0.31,9.37,0.68,12.3c0.3,0.86,0.88,1.63,1.67,2.16c-0.35,0.59-0.57,1.26-0.57,2 c0,0.8,0.31,1.53,0.83,2.1s1.22,0.91,2.02,0.91c1.37,0,2.5-1.12,2.5-2.5c0-0.45-0.12-0.88-0.33-1.25h3.36 c-0.21,0.37-0.33,0.8-0.33,1.25c0,1.38,1.12,2.5,2.5,2.5c0.8,0,1.5-0.35,2.02-0.91s0.83-1.3,0.83-2.1 c0-0.73-0.22-1.41-0.57-2c0.79-0.53,1.37-1.3,1.67-2.16C20.21,12.14,20.07,11.9,19.95,11.71z M8.12,13.58 c-0.86,0-1.56-0.7-1.56-1.56s0.7-1.56,1.56-1.56s1.56,0.7,1.56,1.56S8.98,13.58,8.12,13.58z M15.09,13.58 c-0.86,0-1.56-0.7-1.56-1.56s0.7-1.56,1.56-1.56c0.86,0,1.56,0.7,1.56,1.56S15.95,13.58,15.09,13.58z"></path>
                                        </svg>
                                    </div>
                                    <span>DuckDuckGo</span>
                                </a>
                                <a href="https://www.ecosia.org/search?q={{ query|urlencode }}" target="_blank" class="search-engine-card">
                                    <div class="search-engine-logo ecosia">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                             <!-- Ecosia SVG Path Data -->
                                             <circle cx="12" cy="12" r="10" fill="#75B16D"></circle><path fill="#FFFFFF" d="M12 5.75C8.55 5.75 5.75 8.55 5.75 12c0 3.45 2.8 6.25 6.25 6.25s6.25-2.8 6.25-6.25c0-1.04-.26-2.02-.71-2.89-.66.71-1.59 1.14-2.62 1.14-1.93 0-3.5-1.57-3.5-3.5 0-1.03.43-1.96 1.14-2.62C14.02 5.99 13.04 5.75 12 5.75zm4.92 3.2c-.34-.25-.76-.22-1.05.08-.8.85-1.96 1.37-3.22 1.37-1.68 0-3.16-.89-4.02-2.25-.24-.37-.72-.49-1.09-.25-.37.24-.49.72-.25 1.09.85 1.34 2.24 2.31 3.86 2.54v.37c0 .41.34.75.75.75s.75-.34.75-.75v-.37c1.62-.23 3.01-1.2 3.86-2.54.24-.37.12-.85-.25-1.09z"></path>
                                        </svg>
                                    </div>
                                    <span>Ecosia</span>
                                </a>
                                <a href="https://www.perplexity.ai/search?q={{ query|urlencode }}" target="_blank" class="search-engine-card">
                                    <div class="search-engine-logo perplexity">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                            <!-- Perplexity SVG Path Data -->
                                             <path fill="#000" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v2.14c.49-.09.99-.14 1.5-.14.34 0 .67.02.99.06V7h2v2.11c.05.64.09 1.3.09 1.97 0 1.39-.22 2.67-.62 3.79l-1.74-1.74c.1-.47.17-.96.17-1.47 0-.82-.14-1.59-.39-2.28H13v3.72c-.41.04-.82.07-1.25.07-.44 0-.87-.03-1.28-.08V11H9V9h2V7zm-2.92 9.47c.3-.27.64-.49.99-.66l-1.6-1.6c-.65.65-1.19 1.4-1.56 2.26zm7.84 0c.35.17.69.39.99.66-.37-.86-.91-1.61-1.56-2.26l-1.6 1.6c.35.17.69.39.99.66zm-.98-4.32c.25.69.39 1.46.39 2.28 0 .51-.07 1-.17 1.47l1.74 1.74c.4-.96.62-2.01.62-3.12 0-.67-.04-1.33-.09-1.97H17V9.06c.32-.04.65-.06.99-.06.51 0 1.01.05 1.5.14V7h-2v2.15z"></path>
                                        </svg>
                                    </div>
                                    <span>Perplexity</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Add styling for the search engines -->

                    </div>
                    
                    <!-- Right sidebar with knowledge panels -->
                    <div class="knowledge-panels-sidebar">
                        <!-- Related Search Terms Panel - placed at the top -->
                        {% if related_search_terms %}
                        <div class="related-search-panel mb-3">
                            <h5 class="mb-3">Related Searches</h5>
                            <div class="related-search-terms">
                                {% for term in related_search_terms %}
                                <a href="{{ url_for('search', query=term, page=1) }}" class="related-search-term">
                                    {{ term }}
                                </a>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        <!-- Container for knowledge panels with flexible layout -->
                        <div class="knowledge-panels-container">
                            <!-- Wikipedia panel -->
                            {% if knowledge_panel %}
                            <div class="knowledge-panel-column">
                                <div class="knowledge-panel wikipedia-panel">
                                    <h3>{{ knowledge_panel.title }}</h3>
                                    
                                    {% if knowledge_panel.image_url %}
                                    <img src="{{ knowledge_panel.image_url }}" alt="{{ knowledge_panel.title }}" class="img-fluid">
                                    {% endif %}
                                    
                                    <p>{{ knowledge_panel.summary }}</p>
                                    
                                    {% if request.args.get('lang', '').startswith('de') %}
                                        {% set wiki_lang = 'de' %}
                                        {% set wiki_url = 'https://de.wikipedia.org/wiki/' + knowledge_panel.title.replace(' ', '_') %}
                                        <a href="{{ wiki_url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">Mehr auf Wikipedia lesen</a>
                                        <span class="source">Quelle: Wikipedia</span>
                                    {% elif request.args.get('lang', '').startswith('fr') %}
                                        {% set wiki_lang = 'fr' %}
                                        {% set wiki_url = 'https://fr.wikipedia.org/wiki/' + knowledge_panel.title.replace(' ', '_') %}
                                        <a href="{{ wiki_url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">Lire plus sur Wikipédia</a>
                                        <span class="source">Source: Wikipédia</span>
                                    {% elif request.args.get('lang', '').startswith('es') %}
                                        {% set wiki_lang = 'es' %}
                                        {% set wiki_url = 'https://es.wikipedia.org/wiki/' + knowledge_panel.title.replace(' ', '_') %}
                                        <a href="{{ wiki_url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">Leer más en Wikipedia</a>
                                        <span class="source">Fuente: Wikipedia</span>
                                    {% elif request.args.get('lang', '').startswith('it') %}
                                        {% set wiki_lang = 'it' %}
                                        {% set wiki_url = 'https://it.wikipedia.org/wiki/' + knowledge_panel.title.replace(' ', '_') %}
                                        <a href="{{ wiki_url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">Ulteriori informazioni su Wikipedia</a>
                                        <span class="source">Fonte: Wikipedia</span>
                                    {% else %}
                                        <a href="{{ knowledge_panel.url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">Read more on Wikipedia</a>
                                        <span class="source">Source: Wikipedia</span>
                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Stack Overflow Panel -->
                            {% if stackoverflow_panel %}
                            {% include 'search/components/stackoverflow_panel.html' %}
                            {% endif %}
                            
                            <!-- GitHub panel -->
                            {% if github_panel %}
                            <div class="knowledge-panel-column">
                                <div class="knowledge-panel github-panel">
                                    <div class="d-flex align-items-center mb-3">
                                        {% if github_panel.avatar_url %}
                                        <img src="{{ github_panel.avatar_url }}" alt="{{ github_panel.name }}" class="github-avatar me-3" style="width:60px;height:60px;border-radius:4px;">
                                        {% endif %}
                                        <div>
                                            <h3 class="mb-0">{{ github_panel.name }}</h3>
                                            {% if github_panel.type %}
                                            <span class="badge bg-dark">{{ github_panel.type }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    
                                    <p>{{ github_panel.description }}</p>
                                    
                                    <div class="github-stats mb-3">
                                        <div class="row row-cols-1 row-cols-md-2 g-2">
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-book me-2" viewBox="0 0 16 16">
                                                        <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                                                    </svg>
                                                    <span title="Public repositories">{{ github_panel.public_repos }} repos</span>
                                                </div>
                                            </div>
                                            
                                            {% if github_panel.followers %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people me-2" viewBox="0 0 16 16">
                                                        <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/>
                                                    </svg>
                                                    <span title="Followers">{{ github_panel.followers }} followers</span>
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if github_panel.location %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt me-2" viewBox="0 0 16 16">
                                                        <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>
                                                        <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                                                    </svg>
                                                    <span title="Location">{{ github_panel.location }}</span>
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if github_panel.company %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-building me-2" viewBox="0 0 16 16">
                                                        <path d="M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1ZM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Z"/>
                                                        <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V1Zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3V1Z"/>
                                                    </svg>
                                                    <span title="Company">{{ github_panel.company }}</span>
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if github_panel.email %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope me-2" viewBox="0 0 16 16">
                                                        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
                                                    </svg>
                                                    <a href="mailto:{{ github_panel.email }}" title="Email">{{ github_panel.email }}</a>
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if github_panel.blog %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe me-2" viewBox="0 0 16 16">
                                                        <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                                                    </svg>
                                                    <a href="{{ github_panel.blog }}" target="_blank" rel="noopener" title="Website">{{ github_panel.blog }}</a>
                                                </div>
                                            </div>
                                            {% endif %}
                                            
                                            {% if github_panel.twitter_username %}
                                            <div class="col">
                                                <div class="d-flex align-items-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter me-2" viewBox="0 0 16 16">
                                                        <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
                                                    </svg>
                                                    <a href="https://twitter.com/{{ github_panel.twitter_username }}" target="_blank" rel="noopener" title="Twitter">@{{ github_panel.twitter_username }}</a>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    
                                    {% if github_panel.top_repos %}
                                    <div class="github-repos">
                                        <h5 class="mb-2">
                                            {% if github_panel.type == 'User' %}
                                            Recent repositories
                                            {% else %}
                                            Top repositories
                                            {% endif %}
                                        </h5>
                                        <ul class="list-unstyled">
                                            {% for repo in github_panel.top_repos %}
                                            <li class="mb-2 pb-2 border-bottom">
                                                <a href="{{ repo.url }}" target="_blank" class="fw-bold">{{ repo.name }}</a>
                                                <div class="small text-muted">
                                                    <span class="me-3" title="Stars"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-star me-1" viewBox="0 0 16 16">
                                                        <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                                    </svg> {{ repo.stars }}</span>
                                                    <span title="Forks"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-diagram-2 me-1" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 5 7h2.5V6A1.5 1.5 0 0 1 6 4.5v-1zM8.5 5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1zM3 11.5A1.5 1.5 0 0 1 4.5 10h1A1.5 1.5 0 0 1 7 11.5v1A1.5 1.5 0 0 1 5.5 14h-1A1.5 1.5 0 0 1 3 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm4.5.5a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1A1.5 1.5 0 0 1 9 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"/>
                                                    </svg> {{ repo.forks }}</span>
                                                    {% if repo.updated_at %}
                                                    <span title="Last updated" class="ms-3"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-clock-history me-1" viewBox="0 0 16 16">
                                                        <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                        <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM8 15A6.999 6.999 0 0 1 8 1a7 7 0 0 1 0 14z"/>
                                                        <path d="M8 4.5a.5.5 0 0 1 .5.5v3.5H11a.5.5 0 0 1 0 1H8a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5z"/>
                                                    </svg>{{ repo.updated_at|replace('T', ' ')|replace('Z', '')|truncate(10, true, '') }}</span>
                                                    {% endif %}
                                                </div>
                                                <p class="small mb-0">{{ repo.description }}</p>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    {% endif %}
                                    
                                    <a href="{{ github_panel.url }}" target="_blank" class="btn btn-sm btn-outline-primary mt-2">View on GitHub</a>
                                    <span class="source">Source: GitHub</span>
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Crypto Panel für Kryptowährungen -->
                            {% if crypto_panel %}
                            <div class="knowledge-panel-column">
                                <div class="knowledge-panel crypto-panel">
                                    <div class="d-flex align-items-center mb-3">
                                        {% if crypto_panel.icon_url %}
                                        <img src="{{ crypto_panel.icon_url }}" alt="{{ crypto_panel.name }}" class="crypto-icon me-3" style="width:32px;height:32px;">
                                        {% endif %}
                                        <div>
                                            <h3 class="mb-0">{{ crypto_panel.name }}</h3>
                                            <span class="badge bg-warning text-dark">{{ crypto_panel.symbol }}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="crypto-data">
                                        <div class="crypto-price">
                                            {{ crypto_panel.currency_symbol }}{{ crypto_panel.price|round(2) }}
                                        </div>
                                        
                                        {% if crypto_panel.price_change_24h is defined %}
                                        <div class="crypto-change {% if crypto_panel.price_change_24h > 0 %}positive{% else %}negative{% endif %}">
                                            {% if crypto_panel.price_change_24h > 0 %}+{% endif %}{{ crypto_panel.price_change_24h|round(2) }}% (24h)
                                        </div>
                                        {% endif %}
                                        
                                        {% if crypto_panel.chart_data %}
                                        <div class="crypto-chart">
                                            <canvas id="cryptoChart"></canvas>
                                        </div>
                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                const ctx = document.getElementById('cryptoChart').getContext('2d');
                                                const chartData = {{ crypto_panel.chart_data|tojson }};
                                                
                                                new Chart(ctx, {
                                                    type: 'line',
                                                    data: {
                                                        labels: chartData.labels,
                                                        datasets: [{
                                                            label: '{{ crypto_panel.symbol }} Price',
                                                            data: chartData.prices,
                                                            borderColor: '{{ crypto_panel.color|default("#F7931A") }}',
                                                            borderWidth: 2,
                                                            fill: false,
                                                            pointRadius: 0,
                                                            tension: 0.1
                                                        }]
                                                    },
                                                    options: {
                                                        responsive: true,
                                                        maintainAspectRatio: false,
                                                        plugins: {
                                                            legend: {
                                                                display: false
                                                            },
                                                            tooltip: {
                                                                mode: 'index',
                                                                intersect: false,
                                                                callbacks: {
                                                                    label: function(context) {
                                                                        return '{{ crypto_panel.currency_symbol }}' + context.parsed.y.toFixed(2);
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        scales: {
                                                            x: {
                                                                display: false
                                                            },
                                                            y: {
                                                                display: true,
                                                                grid: {
                                                                    display: true,
                                                                    drawBorder: false,
                                                                }
                                                            }
                                                        }
                                                    }
                                                });
                                            });
                                        </script>
                                        {% endif %}
                                        
                                        <div class="crypto-stats">
                                            <div class="crypto-stat-item">
                                                <div class="crypto-stat-label">Market Cap</div>
                                                <div class="crypto-stat-value">{{ crypto_panel.currency_symbol }}{{ (crypto_panel.market_cap / 1000000000)|round(2) }}B</div>
                                            </div>
                                            <div class="crypto-stat-item">
                                                <div class="crypto-stat-label">Volume (24h)</div>
                                                <div class="crypto-stat-value">{{ crypto_panel.currency_symbol }}{{ (crypto_panel.volume_24h / 1000000000)|round(2) }}B</div>
                                            </div>
                                            <div class="crypto-stat-item">
                                                <div class="crypto-stat-label">Circulating Supply</div>
                                                <div class="crypto-stat-value">{{ (crypto_panel.circulating_supply / 1000000)|round(1) }}M</div>
                                            </div>
                                            <div class="crypto-stat-item">
                                                <div class="crypto-stat-label">All-Time High</div>
                                                <div class="crypto-stat-value">{{ crypto_panel.currency_symbol }}{{ crypto_panel.ath|round(2) }}</div>
                                            </div>
                                        </div>
                                        
                                        <p class="small">{{ crypto_panel.description|truncate(150) }}</p>
                                        
                                        <div class="crypto-links mt-3">
                                            {% if crypto_panel.website %}
                                            <a href="{{ crypto_panel.website }}" target="_blank" class="btn btn-sm btn-outline-primary me-2">Official Website</a>
                                            {% endif %}
                                            {% if crypto_panel.explorer %}
                                            <a href="{{ crypto_panel.explorer }}" target="_blank" class="btn btn-sm btn-outline-secondary">Explorer</a>
                                            {% endif %}
                                        </div>
                                        
                                        <span class="source">Source: {{ crypto_panel.source|default('CoinGecko') }}</span>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div> <!-- Container schließen, um das Layout-Problem zu beheben -->
        
        {% if ai_response_url %}
        <div id="ai-response-url" data-url="{{ ai_response_url }}" style="display: none;"></div>
        {% endif %}
        
        <!-- Import custom JavaScript files -->
        <script src="{{ url_for('static', filename='js/search.js') }}"></script>
        <script src="{{ url_for('static', filename='js/autocomplete.js') }}"></script>
        <script src="{{ url_for('static', filename='js/preview.js') }}"></script>
        <script src="{{ url_for('static', filename='js/mobile-tabs.js') }}"></script>
        
    {% include 'includes/footer.html' %}
</body>
</html>
